{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://jx-42/schemas/investing_trade_ticket.schema.json",
  "title": "InvestingTradeTicket",
  "description": "A proposed or executed trade generated by the Investing Program Agent.",
  "type": "object",
  "required": ["ticket_id", "symbol", "asset_class", "action", "quantity", "currency", "status", "created_at"],
  "additionalProperties": false,
  "properties": {
    "ticket_id": {
      "type": "string",
      "format": "uuid",
      "description": "UUID v4 identifier for the trade ticket."
    },
    "symbol": {
      "type": "string",
      "description": "Ticker symbol or asset identifier (e.g., 'AAPL', 'BTC-USD')."
    },
    "asset_class": {
      "type": "string",
      "enum": ["equity", "etf", "bond", "crypto", "other"],
      "description": "Classification of the asset being traded."
    },
    "action": {
      "type": "string",
      "enum": ["buy", "sell"],
      "description": "Whether this ticket represents a buy or sell order."
    },
    "quantity": {
      "type": "number",
      "exclusiveMinimum": 0,
      "description": "Number of shares, units, or coins to trade."
    },
    "limit_price": {
      "type": ["number", "null"],
      "description": "Optional limit price per unit. Null indicates a market order."
    },
    "currency": {
      "type": "string",
      "pattern": "^[A-Z]{3}$",
      "description": "ISO 4217 three-letter currency code for the order (e.g., 'USD')."
    },
    "rationale": {
      "type": "string",
      "description": "Agent-generated plain-language rationale for the trade proposal."
    },
    "status": {
      "type": "string",
      "enum": ["proposed", "approved", "rejected", "executed"],
      "description": "Current lifecycle status of the trade ticket."
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 datetime when the ticket was created."
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 datetime of the most recent status update."
    },
    "audit_event_id": {
      "type": "string",
      "format": "uuid",
      "description": "Reference to the AuditEvent that recorded the approval or rejection."
    }
  }
}
